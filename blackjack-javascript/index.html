<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>BlackJack Game</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.7.2-rc.0/web3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.slim.min.js" integrity="sha512-6ORWJX/LrnSjBzwefdNUyLCMTIsGoNP6NftMy2UAm1JBm6PRZCO1d7OHBStWpVFZLO+RerTvqX/Z9mBFfCJZ4A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
 
  <script>
	// web3 lib instance
		var contract;
	$(document).ready(function(){
		web3 = new Web3(window.ethereum);
		var address = "0xfA1cf210c8e081AA920019F0e8ddAF32d0bbFb50";
		var abi = [
					{
						"inputs": [],
						"stateMutability": "nonpayable",
						"type": "constructor"
					},
					{
						"inputs": [
							{
								"internalType": "int256",
								"name": "amt",
								"type": "int256"
							}
						],
						"name": "deposit",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "getBalance",
						"outputs": [
							{
								"internalType": "int256",
								"name": "",
								"type": "int256"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [],
						"name": "playerLost",
						"outputs": [
							{
								"internalType": "string",
								"name": "",
								"type": "string"
							}
						],
						"stateMutability": "view",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "bool",
								"name": "action",
								"type": "bool"
							}
						],
						"name": "triggerAction",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					},
					{
						"inputs": [
							{
								"internalType": "int256",
								"name": "amt",
								"type": "int256"
							}
						],
						"name": "withdraw",
						"outputs": [],
						"stateMutability": "nonpayable",
						"type": "function"
					}
				];
		contract = new web3.eth.Contract(abi, address);
		  //contract.methods.getBalance().call().then(function(bal){
			//$("#message").html(bal);
		//});
		setTimeout(function() {
		console.log('This is in setTimeout');
		var returningVal = $("#returningVal").val;
		console.log('returningVal : ',returningVal, typeof returningVal);
		 //contract.methods.triggerAction().call().then(function(){
			//$("#message").html(bal); 
		//});
		},1000);
	});
  </script>	
</head>

<body>
  <div>
    <div>
      <h1>BlackJack Game</h1>
      <!-- Creating a game start -->
      <div id="message">Press Start Button</div>  
	  <input type="hidden" id="returningVal" name="returningVal" />
      <div id="start">
        <button id="btnstart" type="button" onclick="Start()" class="btn">Start Game</button>
      </div>
      <div class="total">Total $<span id="dollars">100</span><br>Bet Amount $<input type="number" id="mybet" value="5"
          min="1" max="100">
          <button id="maxbet" type="button" onclick="maxbet()" class="btn">Max Bet</button>
      </div>
      <div id="output">
        <!-- i.e where all the dealers's and player's card will go -->
        Dealer Hand : <span id="dValue"></span>
        <div id="dealerHolder"></div>
        Player Hand : <span id="pValue"></span>
        <div id="playerHolder"></div>

        <!-- Adding buttons with click event,all referring to same function with different argument respectively -->
        <div id="myactions">
          <button id="btnhold" type="button" onclick="cardAction('hold')" class="btn">Hold</button>
          <button id="btnhit" type="button" onclick="cardAction('hit')" class="btn">Hit</button>
          <button id="btndouble" type="button" onclick="cardAction('double')" class="btn">Double</button>
        </div>
        <div>
           <!-- No need to shuffle always on dealing  -->
          <button id="btndeal" type="button" onclick="dealNew()" class="btn">Deal</button>
        </div>
      </div>
      <div>
      </div>
      <script src="script.js"></script>
</body>

</html>
